{% extends "layout.html" %} {% block title %}Nhận Diện Biển Số - Quản Lý Bãi Đỗ
Xe{% endblock %} {% block nav_detect %}active{% endblock %} {% block page_title
%}Nhận Diện Biển Số{% endblock %} {% block breadcrumb %}
<li class="breadcrumb-item"><a href="{{ url_for('index') }}">Trang Chủ</a></li>
<li class="breadcrumb-item active">Nhận Diện Biển Số</li>
{% endblock %} {% block main_content %}
<div class="row">
    <div class="col-md-6">
        <!-- Camera Card -->
        <div class="card card-info">
            <div class="card-header">
                <h3 class="card-title">Kết Nối Camera</h3>
            </div>
            <div class="card-body">
                <div class="text-center mb-2">
                    <video
                        id="camera-video"
                        autoplay
                        playsinline
                        style="width: 100%; max-height: 360px; background: #000"
                    ></video>
                    <canvas id="camera-canvas" style="display: none"></canvas>
                </div>

                <div class="d-flex justify-content-between">
                    <div>
                        <button
                            id="start-camera"
                            class="btn btn-success btn-sm"
                        >
                            <i class="fas fa-video"></i> Bắt đầu
                        <!-- </button> -->
                        <button
                            id="stop-camera"
                            class="btn btn-danger btn-sm"
                            disabled
                        >
                            <i class="fas fa-stop-circle"></i> Dừng
                        </button>
                    </div>
                    <div>
                        <button id="capture-now" class="btn btn-primary btn-sm">
                            <i class="fas fa-camera"></i> Chụp & Nhận diện
                        </button>
                        <label class="ml-2"
                            >Tự động:
                            <input id="auto-capture" type="checkbox" />
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <!-- Upload Image Card -->
        <div class="card card-primary">
            <div class="card-header">
                <h3 class="card-title">Tải Ảnh Lên</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
                <form
                    id="upload-form"
                    action="/detect"
                    method="post"
                    enctype="multipart/form-data"
                >
                    <div class="form-group">
                        <label for="image-upload"
                            >Chọn ảnh chứa biển số xe</label
                        >
                        <div class="input-group">
                            <div class="custom-file">
                                <input
                                    type="file"
                                    class="custom-file-input"
                                    id="image-upload"
                                    name="image"
                                    accept="image/*"
                                    required
                                />
                                <label
                                    class="custom-file-label"
                                    for="image-upload"
                                    >Chọn file...</label
                                >
                            </div>
                        </div>
                    </div>

                    <!-- OCR Engine Selection -->
                    <div class="form-group">
                        <label for="ocr-engine">Chọn OCR Engine</label>
                        <select
                            class="form-control"
                            id="ocr-engine"
                            name="ocr_engine"
                        >
                            <option value="paddle" selected>
                                PaddleOCR (Khuyến nghị)
                            </option>
                            <option value="tesseract">Tesseract OCR</option>
                        </select>
                        <small class="form-text text-muted">
                            PaddleOCR thường cho kết quả tốt hơn với biển số xe
                            Việt Nam
                        </small>
                    </div>

                    <!-- Preview Area -->
                    <div class="form-group">
                        <div id="image-preview" style="display: none">
                            <img
                                id="preview-img"
                                src=""
                                alt="Preview"
                                class="img-fluid"
                                style="max-height: 300px"
                            />
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-search"></i> Nhận Diện
                    </button>
                    <button
                        type="button"
                        class="btn btn-warning ml-2"
                        onclick="stopAllProcessing()"
                    >
                        <i class="fas fa-stop"></i> Dừng Tất Cả
                    </button>
                    <button
                        type="button"
                        class="btn btn-info ml-2"
                        onclick="manualCleanupTempImages()"
                        title="Dọn dẹp ảnh tạm thời"
                    >
                        <i class="fas fa-broom"></i> Dọn Dẹp
                    </button>
                </form>
            </div>
            <!-- /.card-body -->
        </div>
        <!-- /.card -->
    </div>

  <div class="col-md-6">
    <!-- Results Card -->
    <div class="card card-success">
      <div class="card-header">
        <h3 class="card-title">Kết Quả Nhận Diện</h3>
      </div>
      <!-- /.card-header -->
      <div class="card-body">
        <div id="detection-results" style="display: none">
          <!-- Detected plate image -->
          <div class="text-center mb-3">
            <img
              id="detected-plate"
              src=""
              alt="Biển số được nhận diện"
              class="img-fluid border"
            />
          </div>

          <!-- Detected text -->
          <div class="alert alert-success">
            <h5><i class="icon fas fa-check"></i> Biển số nhận diện được:</h5>
            <h3 id="detected-text" class="text-center"></h3>
          </div>

          <!-- Confidence score -->
          <!-- <div class="info-box">
            <span class="info-box-icon bg-success"
              ><i class="fas fa-percent"></i
            ></span>
            <div class="info-box-content">
              <span class="info-box-text">Độ tin cậy</span>
              <span class="info-box-number" id="confidence-score">0%</span>
            </div>
          </div> -->

          <!-- Action buttons -->
          <div class="text-center mt-3">
            <button class="btn btn-primary" onclick="saveResult()">
              <i class="fas fa-save"></i> Lưu Kết Quả
            </button>
            <button class="btn btn-secondary" onclick="resetForm()">
              <i class="fas fa-redo"></i> Nhận Diện Mới
            </button>
          </div>
        </div>

        <div id="no-results" class="text-center text-muted">
          <i class="fas fa-image fa-3x mb-3"></i>
          <p>Tải ảnh lên để bắt đầu nhận diện biển số xe</p>
        </div>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </div>
</div>

<!-- Recent Detection History -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Lịch Sử Nhận Diện Gần Đây</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr class="text-black">
                            <th>STT</th>
                            <th>Thời Gian</th>
                            <th>Biển Số</th>
                            <th>Trạng Thái</th>
                            <th>Thao Tác</th>
                        </tr>
                    </thead>
                    <tbody id="detection-history">
                        <!-- History rows will be loaded here -->
                        <tr>
                            <td colspan="5" class="text-center text-muted">
                                Chưa có dữ liệu
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- /.card-body -->
        </div>
        <!-- /.card -->
    </div>
</div>
{% endblock %} {% block page_scripts %}
<script>
    $(document).ready(function () {
        // If server passed initial history, render it (always produce a JS array)
        const initialHistory = {{ history|default([])|tojson }};
        if (initialHistory && initialHistory.length) {
            updateHistory(initialHistory);
        }

        // Variable to track ongoing requests
        let currentRequest = null;

        // Cleanup temp images every 30 minutes
        setInterval(function() {
            $.ajax({
                url: '/cleanup-temp-images',
                type: 'POST',
                success: function(response) {
                    if (response.success) {
                        console.log('Temp cleanup:', response.message);
                    }
                },
                error: function() {
                    console.log('Temp cleanup failed');
                }
            });
        }, 30 * 60 * 1000); // 30 minutes

        // Cleanup when leaving page
        window.addEventListener('beforeunload', function() {
            cleanupTempImages();
        });

        // Handle file input change
        $("#image-upload").on("change", function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    $("#preview-img").attr("src", e.target.result);
                    $("#image-preview").show();
                };
                reader.readAsDataURL(file);

        // Update file label
        $(".custom-file-label").text(file.name);
      }
    });

        // Handle form submission
        $("#upload-form").on("submit", function (e) {
            e.preventDefault();

            // Abort any ongoing request
            if (currentRequest) {
                currentRequest.abort();
                currentRequest = null;
            }

      const formData = new FormData(this);

            // Show loading state with cancel button
            const submitBtn = $(this).find('button[type="submit"]');
            const originalText = submitBtn.html();
            submitBtn
                .html('<i class="fas fa-spinner fa-spin"></i> Đang xử lý... <button type="button" class="btn btn-sm btn-danger ml-2" onclick="cancelProcessing()">Hủy</button>')
                .prop("disabled", false);

            currentRequest = $.ajax({
                url: "/detect",
                type: "POST",
                data: formData,
                processData: false,
                contentType: false,
                timeout: 60000, // 60 second timeout
                success: function (response) {
                    console.log("Response received:", response);
                    currentRequest = null;
                    if (response && response.success) {
                        displayResults(response);
                        toastr.success("Nhận diện thành công!", "Thành công");
                    } else {
                        console.log("Response indicates failure:", response);
                        showError(
                            (response && response.message) ||
                                "Có lỗi xảy ra khi nhận diện biển số"
                        );
                    }
                },
                error: function (xhr, status, error) {
                    console.log("AJAX Error:", {xhr: xhr, status: status, error: error});
                    console.log("Response Text:", xhr.responseText);
                    currentRequest = null;
                    if (status === 'abort') {
                        showError("Đã hủy quá trình xử lý");
                    } else if (status === 'timeout') {
                        showError("Quá thời gian xử lý. Vui lòng thử lại.");
                    } else {
                        let errorMsg = "Có lỗi xảy ra khi kết nối với máy chủ: " + error;
                        if (xhr.responseText) {
                            try {
                                const errorResponse = JSON.parse(xhr.responseText);
                                errorMsg = errorResponse.message || errorMsg;
                            } catch (e) {
                                // Keep original error message
                            }
                        }
                        showError(errorMsg);
                    }
                },
                complete: function () {
                    // Restore button state
                    submitBtn.html(originalText).prop("disabled", false);
                    currentRequest = null;
                },
            });
        });

        // Global function to cancel processing
        window.cancelProcessing = function() {
            if (currentRequest) {
                currentRequest.abort();
                currentRequest = null;
                showError("Đã dừng quá trình xử lý");
            }
        };

        // Global function to stop all processing
        window.stopAllProcessing = function() {
            // Stop form upload request
            if (currentRequest) {
                currentRequest.abort();
                currentRequest = null;
            }

            // Stop camera request
            if (cameraRequest) {
                cameraRequest.abort();
                cameraRequest = null;
            }

            // Stop auto capture
            if (autoInterval) {
                clearInterval(autoInterval);
                autoInterval = null;
                document.getElementById('auto-capture').checked = false;
            }

            // Reset trạng thái chờ xác nhận
            waitingForConfirmation = false;

            // Reset button states
            const submitBtn = $("#upload-form").find('button[type="submit"]');
            submitBtn.html('<i class="fas fa-search"></i> Nhận Diện').prop("disabled", false);

            showError("Đã dừng tất cả các tiến trình xử lý");
        };
    });

    // Camera controls
    let stream = null;
    let autoInterval = null;
    let cameraRequest = null;
    let waitingForConfirmation = false; // Biến theo dõi trạng thái chờ xác nhận

    async function startCamera() {
        try {
            stream = await navigator.mediaDevices.getUserMedia({ video: { width: 1280, height: 720 } });
            const video = document.getElementById('camera-video');
            video.srcObject = stream;
            document.getElementById('start-camera').disabled = true;
            document.getElementById('stop-camera').disabled = false;
        } catch (err) {
            showError('Không thể truy cập camera: ' + err.message);
        }
    }

    function stopCamera() {
        // Cancel any ongoing camera request
        if (cameraRequest) {
            cameraRequest.abort();
            cameraRequest = null;
        }

        // Reset trạng thái chờ xác nhận
        waitingForConfirmation = false;

        if (stream) {
            stream.getTracks().forEach(t => t.stop());
            stream = null;
        }
        document.getElementById('start-camera').disabled = false;
        document.getElementById('stop-camera').disabled = true;
        if (autoInterval) { clearInterval(autoInterval); autoInterval = null; }
        
        // Cleanup temp images when stopping camera
        cleanupTempImages();
    }

    // Function to cleanup temp images
    function cleanupTempImages() {
        $.ajax({
            url: '/cleanup-temp-images',
            type: 'POST',
            success: function(response) {
                if (response.success) {
                    console.log('Manual cleanup:', response.message);
                }
            },
            error: function() {
                console.log('Manual cleanup failed');
            }
        });
    }

    // Manual cleanup with notification
    window.manualCleanupTempImages = function() {
        $.ajax({
            url: '/cleanup-temp-images',
            type: 'POST',
            success: function(response) {
                if (response.success) {
                    toastr.success(response.message, "Dọn dẹp thành công");
                } else {
                    toastr.error(response.message || "Có lỗi khi dọn dẹp", "Lỗi");
                }
            },
            error: function() {
                toastr.error("Không thể kết nối để dọn dẹp", "Lỗi");
            }
        });
    };

    async function captureAndSend() {
        // Kiểm tra nếu đang chờ xác nhận thì không capture nữa
        if (waitingForConfirmation) {
            console.log("Đang chờ xác nhận, bỏ qua capture");
            return;
        }

        const video = document.getElementById('camera-video');
        const canvas = document.getElementById('camera-canvas');
        if (!video || !stream) return showError('Camera chưa được bật');

        // Cancel previous camera request if exists
        if (cameraRequest) {
            cameraRequest.abort();
        }

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        canvas.toBlob(async function (blob) {
            const fd = new FormData();
            fd.append('image', blob, 'capture.jpg');
            // Thêm OCR engine từ form
            const ocrEngine = document.getElementById('ocr-engine').value;
            fd.append('ocr_engine', ocrEngine);
            // Đánh dấu đây là request từ camera
            fd.append('source', 'camera');

            try {
                cameraRequest = $.ajax({
                    url: '/detect',
                    type: 'POST',
                    data: fd,
                    processData: false,
                    contentType: false,
                    timeout: 60000,
                    success: function(data) {
                        if (data.success) {
                            displayResults(data);
                            
                            // Nếu cần xác nhận thì dừng auto-capture
                            if (data.needs_confirmation) {
                                waitingForConfirmation = true;
                                // Dừng auto-capture
                                if (autoInterval) {
                                    clearInterval(autoInterval);
                                    autoInterval = null;
                                    document.getElementById('auto-capture').checked = false;
                                }
                                toastr.info("Nhận diện thành công! Vui lòng xác nhận để lưu kết quả. Auto-capture đã dừng.", "Chờ xác nhận", {timeOut: 8000});
                            } else {
                                toastr.success("Nhận diện camera thành công!", "Thành công");
                            }
                        } else {
                            showError(data.message || 'Nhận diện thất bại');
                        }
                    },
                    error: function(xhr, status, error) {
                        if (status === 'abort' && xhr.readyState !== 4) {
                            showError('Đã hủy quá trình nhận diện camera');
                        } else if (status !== 'abort') {
                            showError('Lỗi kết nối: ' + error);
                        }
                    },
                    complete: function() {
                        cameraRequest = null;
                    }
                });
            } catch (err) {
                showError('Lỗi kết nối: ' + err.message);
            }
        }, 'image/jpeg', 0.8);
    }

    // Attach camera button handlers
    document.getElementById('start-camera').addEventListener('click', startCamera);
    document.getElementById('stop-camera').addEventListener('click', stopCamera);
    document.getElementById('capture-now').addEventListener('click', captureAndSend);
    document.getElementById('auto-capture').addEventListener('change', function (e) {
        if (e.target.checked) {
            // Kiểm tra nếu đang chờ xác nhận thì không cho bật auto-capture
            if (waitingForConfirmation) {
                e.target.checked = false;
                toastr.warning("Vui lòng xác nhận hoặc bỏ qua kết quả hiện tại trước khi bật auto-capture", "Chờ xác nhận");
                return;
            }
            // Reset trạng thái và bắt đầu auto-capture
            waitingForConfirmation = false;
            autoInterval = setInterval(captureAndSend, 2000);
            toastr.info("Auto-capture đã bật - sẽ tự động dừng khi có kết quả cần xác nhận", "Auto-capture", {timeOut: 3000});
        } else {
            if (autoInterval) { 
                clearInterval(autoInterval); 
                autoInterval = null; 
            }
        }
    });

    function displayResults(response) {
        $("#detected-plate").attr("src", response.plate_image);
        $("#detected-text").text(response.number_plate); 
        $("#confidence-score").text(
            Math.round(response.confidence * 100) + "%"
        );

        $("#no-results").hide();
        $("#detection-results").show();

        // Cập nhật nút action dựa trên loại request
        const actionButtons = $("#detection-results .text-center.mt-3");
        
        if (response.vehicle_in_parking && response.needs_exit_confirmation) {
            // Xe đang trong bãi - hiển thị nút xác nhận ra bãi
            actionButtons.html(`
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i> 
                    <strong>Xe đang trong bãi!</strong> Xác nhận cho xe ra bãi?
                </div>
                <button class="btn btn-danger" onclick="confirmExitParking('${response.number_plate}', '${response.plate_image}')">
                    <i class="fas fa-sign-out-alt"></i> Xác Nhận Ra Bãi
                </button>
                <button class="btn btn-secondary" onclick="skipCameraResult()">
                    <i class="fas fa-times"></i> Hủy
                </button>
            `);
        } else if (response.needs_confirmation) {
            // Camera request chưa được lưu (xe vào bãi)
            actionButtons.html(`
                <button class="btn btn-success" onclick="confirmCameraResult('${response.number_plate}', '${response.plate_image}')">
                    <i class="fas fa-check"></i> Lưu Kết Quả
                </button>
                <button class="btn btn-secondary" onclick="skipCameraResult()">
                    <i class="fas fa-times"></i> Bỏ Qua
                </button>
            `);
        } else {
            // Upload hoặc camera đã được lưu
            actionButtons.html(`
                <button class="btn btn-primary" onclick="saveResult()">
                    <i class="fas fa-save"></i> Lưu Kết Quả
                </button>
                <button class="btn btn-secondary" onclick="resetForm()">
                    <i class="fas fa-redo"></i> Nhận Diện Mới
                </button>
            `);
        }

        // Add to history (if available)
        if (response.history && response.history.length > 0) {
            updateHistory(response.history);
        }
        
        // Store current result for confirmation
        window.currentResult = response;
    }

  function showError(message) {
    toastr.error(message, "Lỗi");
  }

  function skipCameraResult() {
    // Reset trạng thái chờ xác nhận
    waitingForConfirmation = false;
    
    // Reset form để có thể capture tiếp
    resetForm();
    
    // Tự động bật lại auto-capture nếu camera đang hoạt động (với delay 1 giây)
    if (stream && document.getElementById('camera-video').srcObject) {
        setTimeout(() => {
            document.getElementById('auto-capture').checked = true;
            autoInterval = setInterval(captureAndSend, 2000);
            toastr.success("Auto-capture đã tiếp tục hoạt động.", "Tiếp tục", {timeOut: 3000});
        }, 1000);
        toastr.info("Đã bỏ qua kết quả. Sẽ tiếp tục auto-capture sau 1 giây.", "Đã bỏ qua", {timeOut: 3000});
    } else {
        toastr.info("Đã bỏ qua kết quả. Vui lòng bật camera để sử dụng auto-capture.", "Đã bỏ qua", {timeOut: 3000});
    }
  }

  function confirmCameraResult(numberPlate, plateImage) {
    // Gửi request xác nhận lưu kết quả camera
    $.ajax({
        url: '/confirm-detection',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({
            number_plate: numberPlate,
            temp_image_path: plateImage
        }),
        success: function(response) {
            if (response.success) {
                toastr.success(response.message, "Đã lưu!");
                
                // Reset trạng thái chờ xác nhận
                waitingForConfirmation = false;
                
                // Cập nhật UI
                if (response.history) {
                    updateHistory(response.history);
                }
                
                // Cập nhật nút action
                const actionButtons = $("#detection-results .text-center.mt-3");
                actionButtons.html(`
                    <button class="btn btn-primary" onclick="saveResult()">
                        <i class="fas fa-save"></i> Lưu Kết Quả
                    </button>
                    <button class="btn btn-secondary" onclick="resetForm()">
                        <i class="fas fa-redo"></i> Nhận Diện Mới
                    </button>
                `);
                
                // Cập nhật ảnh nếu có ảnh mới
                if (response.final_image) {
                    $("#detected-plate").attr("src", response.final_image);
                }
                
                // Tự động bật lại auto-capture sau khi lưu thành công (nếu camera đang hoạt động)
                if (stream && document.getElementById('camera-video').srcObject) {
                    setTimeout(() => {
                        document.getElementById('auto-capture').checked = true;
                        autoInterval = setInterval(captureAndSend, 2000);
                        toastr.success("Auto-capture đã tiếp tục hoạt động.", "Tiếp tục", {timeOut: 3000});
                    }, 1000);
                    toastr.success(response.message + " Sẽ tiếp tục auto-capture sau 1 giây.", "Đã lưu!");
                } else {
                    toastr.success(response.message, "Đã lưu!");
                }
                
            } else {
                showError(response.message || "Có lỗi khi lưu kết quả");
            }
        },
        error: function(xhr, status, error) {
            showError("Lỗi kết nối khi lưu: " + error);
        }
    });
  }

  function confirmExitParking(numberPlate, plateImage) {
    // Gửi request xác nhận cho xe ra bãi
    $.ajax({
        url: '/detect',
        type: 'POST',
        data: {
            'number_plate': numberPlate,
            'confirmed': 'true',
            'action': 'exit',
            'source': 'camera'
        },
        success: function(response) {
            if (response.success) {
                toastr.success(response.status, "Thành công!");
                
                // Reset trạng thái chờ xác nhận
                waitingForConfirmation = false;
                
                // Cập nhật UI
                if (response.history) {
                    updateHistory(response.history);
                }
                
                // Cập nhật nút action
                const actionButtons = $("#detection-results .text-center.mt-3");
                actionButtons.html(`
                    <button class="btn btn-primary" onclick="saveResult()">
                        <i class="fas fa-save"></i> Hoàn Thành
                    </button>
                    <button class="btn btn-secondary" onclick="resetForm()">
                        <i class="fas fa-redo"></i> Nhận Diện Mới
                    </button>
                `);
                
                // Tự động bật lại auto-capture sau khi xử lý thành công (nếu camera đang hoạt động)
                if (stream && document.getElementById('camera-video').srcObject) {
                    setTimeout(() => {
                        document.getElementById('auto-capture').checked = true;
                        autoInterval = setInterval(captureAndSend, 2000);
                        toastr.success("Auto-capture đã tiếp tục hoạt động.", "Tiếp tục", {timeOut: 3000});
                    }, 1000);
                }
                
            } else {
                showError(response.message || "Có lỗi khi cho xe ra bãi");
            }
        },
        error: function(xhr, status, error) {
            showError("Lỗi kết nối khi cho xe ra bãi: " + error);
        }
    });
  }

  function saveResult() {
    // Implementation for saving result
    toastr.success("Kết quả đã được lưu thành công!", "Thành công");
    setTimeout(function () {
      location.reload();
    }, 1200); // Đợi toast hiển thị xong rồi reload
  }

  function resetForm() {
    $("#upload-form")[0].reset();
    $("#image-preview").hide();
    $("#detection-results").hide();
    $("#no-results").show();
    $(".custom-file-label").text("Chọn file...");
  }

    function updateHistory(historyData) {
        const tbody = $("#detection-history");
        tbody.empty();
        if (!historyData || historyData.length === 0) {
            tbody.append(`<tr><td colspan="5" class="text-center text-muted">Chưa có dữ liệu</td></tr>`);
            return;
        }

        historyData.forEach((rec, idx) => {
            const created = rec.created_at ? rec.created_at : 'N/A';
            const statusText = rec.status == 1 ? 'Trong Bãi' : 'Đã ra';
            const row = `
                <tr>
                    <td>${idx + 1}</td>
                    <td>${created}</td>
                    <td>${rec.plate_text}</td>
                    <td class="text-center">${statusText}</td>
                    <td class="text-center">
                        <button class="btn btn-sm btn-info">Chi tiết</button>
                    </td>
                </tr>`;
            tbody.append(row);
        });
    }
</script>
{% endblock %} {% block additional_css %}
<style>
  .custom-file-label::after {
    content: "Duyệt";
  }

  #image-preview {
    border: 2px dashed #ddd;
    padding: 10px;
    text-align: center;
    border-radius: 5px;
  }

  #detected-plate {
    max-height: 150px;
    border-radius: 5px;
  }

  .table th {
    background-color: #e3f2fd;
    color: #1565c0;
    font-weight: 600;
    border-bottom: 2px solid #90caf9;
  }
  .table tbody tr:nth-child(odd) {
    background-color: #f9f9f9;
  }
  .table tbody tr:nth-child(even) {
    background-color: #e3eafc;
  }
  .table td,
  .table th {
    border: 1px solid #bbdefb;
    vertical-align: middle;
  }
  .table-hover tbody tr:hover {
    background-color: #bbdefb;
    color: #0d47a1;
  }
  .table td {
    color: #222;
  }
</style>
{% endblock %}
